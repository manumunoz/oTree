{% extends "global/Page.html" %}
{% load otree static %}

{% block title %}
<div class="container">
    <div class="row">
      <div class="col-sm-12 border border-dark bg-dark text-white rounded">
        <h2> Connections </h2>
</div>
{% endblock %}

{% block content %}
<div class="container">
    <div class="row">
      <div class="col-sm-12 border border-dark bg-secondary text-white rounded mb-1">
          <p>
            <b>
            {% if player.given_type == 1 %}
            You are Player {{ player.name }}. Your internal symbol is Circle and your external symbol is Circle

            {% elif player.given_type == 2 %}
            You are Player {{ player.name }}. Your internal symbol is Circle and your external symbol is Triangle

            {% elif player.given_type == 3 %}
            You are Player {{ player.name }}. Your internal symbol is Triangle and your external symbol is Circle

            {% else %}
            You are Player {{ player.name }}. Your internal symbol is Triangle and your external symbol is Triangle
            {% endif %}
            </b>
        </p>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-3 border border-dark rounded p-3 mb-1">
        <h6>Please, check the names of your friends in this list:</h6>

            {% for f in form %}
                {% formfield f %}
            {% endfor %}

          <br><br>
          {% next_button %}
      </div>
      <div class="col-sm-9 border border-dark rounded p-3 mb-1">
        <div id="cy"></div>
            <div class="container ">
                <div class="row">

                </div>
            </div>
      </div>
    </div>
</div>

{% endblock %}

{% block scripts %}
    <script src="https://cdnjs.cloudflare.com/ajax/libs/cytoscape/3.1.0/cytoscape.js"></script>
    <script>
        var jsonnet = JSON.parse('{{group.network_data|safe}}');
        console.log(jsonnet);
        var cy = window.cy = cytoscape({
            container: document.getElementById('cy'),

        });
        cy.json(jsonnet);
        var layout = cy.layout({name: 'circle'});

        layout.run();
        cy.style()
            .selector('edge')
            .style('line-color', 'black')
            .style("target-arrow-shape", "triangle")
            .style("curve-style", 'bezier')
            .update() // update the elements in the graph with the new style
        ;
        cy.userZoomingEnabled(false);
        cy.autoungrabify(true);
    </script>
{% endblock %}

{% block styles %}
    <style type="text/css">
        #cy {
            width: 100%;
            height: 500px;
            display: block;
        }

        #white{
            color: #ffffff;
        }

        .center {
            text-align: center;
        }
    </style>
{% endblock %}
